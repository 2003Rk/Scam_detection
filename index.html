<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScamShield - Protect Yourself from Scams</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0a0a0a;
            color: #e8e8e8;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 24px;
        }

        .bg-gradient {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at top, #1a1a2e 0%, #0a0a0a 50%);
            z-index: -1;
        }

        /* Landing Page */
        #landing {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        nav {
            padding: 30px 0;
            display: flex;
            justify-content: flex-start;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
            color: #fff;
            margin-left: -400px;
        }

        .shield-icon {
            width: 36px;
            height: 36px;
            background: #6366f1;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .hero {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 80px 0;
        }

        .hero-content h1 {
            font-size: 56px;
            margin-bottom: 24px;
            font-weight: 700;
            color: #fff;
            line-height: 1.2;
            animation: fadeInUp 0.8s ease, glow 3s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { 
                text-shadow: 0 0 20px rgba(99, 102, 241, 0.5),
                             0 0 40px rgba(99, 102, 241, 0.3);
            }
            50% { 
                text-shadow: 0 0 30px rgba(99, 102, 241, 0.8),
                             0 0 60px rgba(99, 102, 241, 0.5);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero-content p {
            font-size: 20px;
            margin-bottom: 40px;
            color: #a0a0a0;
            font-weight: 400;
            animation: fadeInUp 1s ease;
        }

        .cta-button {
            background: #6366f1;
            color: #fff;
            border: none;
            padding: 16px 40px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            animation: fadeInUp 1.2s ease;
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.4);
        }

        .cta-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .cta-button:hover::before {
            width: 300px;
            height: 300px;
        }

        .cta-button:hover {
            background: #5558e3;
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(99, 102, 241, 0.6), 
                        0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .features {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 32px;
            padding: 80px 0;
            max-width: 1200px;
            margin: 0 auto;
        }

        .feature-card {
            background: #1a1a1a;
            border-radius: 16px;
            padding: 48px;
            transition: all 0.3s ease;
            border: 1px solid #2a2a2a;
            position: relative;
            overflow: hidden;
            min-height: 280px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            cursor: default;
            pointer-events: auto;
        }

        .feature-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(99, 102, 241, 0.1), 
                transparent);
            transition: left 0.5s;
        }

        .feature-card:hover::after {
            left: 100%;
        }

        .feature-card:hover {
            transform: translateY(-4px);
            border-color: rgba(99, 102, 241, 0.5);
            background: #1f1f1f;
            box-shadow: 0 8px 30px rgba(99, 102, 241, 0.2);
        }

        .feature-icon {
            font-size: 56px;
            margin-bottom: 28px;
            position: relative;
            z-index: 1;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
            text-align: center;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .feature-card h3 {
            font-size: 26px;
            margin-bottom: 18px;
            color: #fff;
            font-weight: 700;
            position: relative;
            z-index: 1;
            text-align: center;
        }

        .feature-card:hover h3 {
            color: #8b8ff1;
            text-shadow: 0 0 10px rgba(99, 102, 241, 0.5);
        }

        .feature-card p {
            color: #a0a0a0;
            line-height: 1.7;
            font-size: 16px;
            position: relative;
            z-index: 1;
            text-align: center;
        }

        /* Landing page feature cards should not look clickable */
        #landing .feature-card:hover {
            transform: translateY(-2px);
            cursor: default;
        }

        /* Add a subtle border to indicate it's informational */
        #landing .feature-card::before {
            content: '';
            position: absolute;
            top: 10px;
            right: 10px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(99, 102, 241, 0.6);
            z-index: 3;
        }

        /* Landing Page Sections */
        .landing-section {
            padding: 100px 0;
            position: relative;
        }

        .section-header {
            text-align: center;
            margin-bottom: 10px;
        }

        .section-title {
            font-size: 48px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-subtitle {
            font-size: 20px;
            color: #a0a0a0;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Our Impact Section */
        .impact-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 80px;
        }

        .impact-card {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 16px;
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .impact-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, #6366f1, #8b5cf6);
        }

        .impact-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(99, 102, 241, 0.3);
        }

        .impact-number {
            font-size: 48px;
            font-weight: 700;
            color: #6366f1;
            margin-bottom: 16px;
            display: block;
        }

        .impact-label {
            font-size: 18px;
            color: #fff;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .impact-description {
            font-size: 14px;
            color: #a0a0a0;
            line-height: 1.5;
        }

        /* Intelligence Section */
        .intelligence-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px;
        }

        .intelligence-card {
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 100%);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 16px;
            padding: 40px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .intelligence-card::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(50%, -50%);
        }

        .intelligence-card:hover {
            border-color: rgba(99, 102, 241, 0.5);
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(99, 102, 241, 0.2);
        }

        .intelligence-icon {
            width: 60px;
            height: 60px;
            background: rgba(99, 102, 241, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 24px;
            position: relative;
            z-index: 2;
        }

        .intelligence-card h3 {
            font-size: 24px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 16px;
            position: relative;
            z-index: 2;
        }

        .intelligence-card p {
            color: #a0a0a0;
            line-height: 1.6;
            margin-bottom: 24px;
            position: relative;
            z-index: 2;
        }

        .intelligence-features {
            list-style: none;
            position: relative;
            z-index: 2;
        }

        .intelligence-features li {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            color: #e0e0e0;
            font-size: 14px;
        }

        .intelligence-features li::before {
            content: '‚úì';
            color: #6366f1;
            font-weight: bold;
            font-size: 16px;
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .features {
                grid-template-columns: repeat(2, 1fr);
                grid-template-rows: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {
            .section-title {
                font-size: 36px;
            }

            .section-subtitle {
                font-size: 18px;
            }

            .landing-section {
                padding: 60px 0;
            }

            .features {
                grid-template-columns: 1fr;
                grid-template-rows: auto;
                gap: 20px;
            }

            .feature-card {
                padding: 32px;
                min-height: 220px;
            }

            .feature-icon {
                font-size: 48px;
            }

            .feature-card h3 {
                font-size: 22px;
            }

            .impact-stats {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 24px;
            }

            .intelligence-grid {
                grid-template-columns: 1fr;
                gap: 24px;
            }

            .intelligence-card {
                padding: 24px;
            }

            .section-nav {
                display: none;
            }
        }

        /* Navigation for sections */
        .section-nav {
            position: fixed;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .nav-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-dot.active {
            background: #6366f1;
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.6);
        }

        .nav-dot:hover {
            background: rgba(99, 102, 241, 0.7);
            transform: scale(1.2);
        }

        /* Dashboard */
        #dashboard {
            display: none;
            min-height: 100vh;
            padding: 0;
        }

        .dashboard-sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: #0f0f0f;
            border-right: 1px solid #1f1f1f;
            padding: 24px;
            overflow-y: auto;
            z-index: 100;
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 40px;
            padding-bottom: 24px;
            border-bottom: 1px solid #1f1f1f;
        }

        .sidebar-logo .shield-icon {
            width: 32px;
            height: 32px;
            font-size: 16px;
        }

        .sidebar-logo span {
            font-size: 20px;
            font-weight: 600;
            color: #fff;
        }

        .sidebar-section {
            margin-bottom: 32px;
        }

        .sidebar-section-title {
            font-size: 11px;
            font-weight: 600;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #a0a0a0;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .sidebar-item:hover {
            background: #1a1a1a;
            color: #fff;
        }

        .sidebar-item.active {
            background: rgba(99, 102, 241, 0.1);
            color: #6366f1;
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.1);
        }

        .sidebar-item-icon {
            font-size: 18px;
            width: 20px;
            text-align: center;
        }

        .dashboard-main {
            margin-left: 280px;
            padding: 32px;
            min-height: 100vh;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid #1f1f1f;
            flex: 0 0 auto;
        }

        .dashboard-title {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .dashboard-title h1 {
            font-size: 28px;
            font-weight: 700;
            color: #fff;
        }

        .dashboard-title .badge {
            background: rgba(99, 102, 241, 0.1);
            color: #6366f1;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: linear-gradient(135deg, #1a1a1a 0%, #151515 100%);
            border: 1px solid #2a2a2a;
            border-radius: 12px;
            padding: 24px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 100%;
            background: linear-gradient(180deg, #6366f1, #8b5cf6);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .stat-card:hover::before {
            opacity: 1;
        }

        .stat-card:hover {
            border-color: rgba(99, 102, 241, 0.3);
            box-shadow: 0 8px 30px rgba(99, 102, 241, 0.15);
            transform: translateY(-2px);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .stat-label {
            color: #a0a0a0;
            font-size: 13px;
            font-weight: 500;
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            background: rgba(99, 102, 241, 0.1);
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 8px;
        }

        .stat-change {
            font-size: 13px;
            color: #a0a0a0;
            font-weight: 500;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: flex;
            flex-direction: column;
            align-items: stretch;
            animation: fadeIn 0.3s ease;
            min-height: calc(100vh - 120px);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feature-container {
            max-width: 900px;
            margin: 0 auto;
            padding-top: 0;
            flex: 0 0 auto;
        }

        .feature-main-card {
            background: #1a1a1a;
            border-radius: 12px;
            padding: 40px;
            border: 1px solid #2a2a2a;
            margin: 0 auto 24px auto;
            width: 100%;
            max-width: 800px;
            text-align: center;
        }

        .feature-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-bottom: 32px;
            text-align: center;
        }

        .feature-icon-large {
            width: 56px;
            height: 56px;
            background: rgba(99, 102, 241, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }

        .feature-header h2 {
            font-size: 24px;
            color: #fff;
            font-weight: 600;
        }

        .tech-info {
            background: #0d0d0d;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 24px;
            border: 1px solid #2a2a2a;
            text-align: center;
        }

        .tech-info h3 {
            font-size: 14px;
            color: #6366f1;
            font-weight: 600;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            text-align: center;
        }

        .tech-info p {
            color: #a0a0a0;
            line-height: 1.7;
            font-size: 14px;
            text-align: center;
        }

        textarea, input[type="text"] {
            width: 100%;
            padding: 14px;
            border-radius: 8px;
            border: 1px solid #2a2a2a;
            background: #0d0d0d;
            color: #e8e8e8;
            font-size: 14px;
            margin-bottom: 16px;
            resize: vertical;
            min-height: 120px;
            transition: all 0.2s ease;
            font-family: inherit;
        }

        textarea:focus, input[type="text"]:focus {
            outline: none;
            border-color: #6366f1;
            background: #121212;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        textarea::placeholder, input::placeholder {
            color: #5a5a5a;
        }

        .upload-section {
            border: 2px dashed #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            background: #0d0d0d;
            transition: all 0.3s ease;
        }

        .upload-section:hover {
            border-color: #6366f1;
            background: #121212;
        }

        .upload-label {
            display: inline-block;
            padding: 12px 24px;
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid #6366f1;
            border-radius: 6px;
            color: #6366f1;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .upload-label:hover {
            background: rgba(99, 102, 241, 0.2);
            transform: translateY(-1px);
        }

        .file-preview {
            margin-top: 12px;
            padding: 12px;
            background: #1a1a1a;
            border-radius: 6px;
            border: 1px solid #2a2a2a;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .file-preview.active {
            display: block;
        }

        .file-info {
            color: #e8e8e8;
            font-size: 13px;
            margin-bottom: 8px;
        }

        .file-name {
            color: #6366f1;
            font-weight: 600;
        }

        .file-size {
            color: #a0a0a0;
        }

        .image-preview {
            max-width: 200px;
            max-height: 200px;
            border-radius: 6px;
            margin-top: 8px;
        }

        .audio-controls {
            width: 100%;
            margin-top: 8px;
        }

        .scan-button {
            width: 100%;
            background: #6366f1;
            border: none;
            color: #fff;
            padding: 14px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .scan-button:hover {
            background: #5558e3;
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.4);
            transform: translateY(-1px);
        }

        .scan-button:disabled {
            background: #2a2a2a;
            color: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .scan-button:disabled:hover {
            background: #2a2a2a;
            transform: none;
            box-shadow: none;
        }

        .result {
            margin-top: 20px;
            padding: 16px;
            border-radius: 8px;
            display: none;
            animation: slideIn 0.3s ease;
            border: 1px solid;
            font-size: 14px;
        }

        .result.safe {
            background: rgba(34, 197, 94, 0.1);
            border-color: #22c55e;
            color: #4ade80;
        }

        .result.warning {
            background: rgba(251, 146, 60, 0.1);
            border-color: #fb923c;
            color: #fbbf24;
        }

        .result.danger {
            background: rgba(239, 68, 68, 0.1);
            border-color: #ef4444;
            color: #f87171;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Loading animation for AI analysis */
        .result.loading {
            background: rgba(99, 102, 241, 0.1);
            border-color: #6366f1;
            color: #6366f1;
        }

        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(99, 102, 241, 0.3);
            border-radius: 50%;
            border-top-color: #6366f1;
            animation: spin 1s ease-in-out infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .news-grid {
            display: grid;
            gap: 16px;
        }

        .news-item {
            background: #0d0d0d;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #2a2a2a;
            transition: all 0.3s ease;
        }

        .news-item:hover {
            border-color: rgba(99, 102, 241, 0.3);
            background: #121212;
        }

        .news-item h3 {
            color: #fff;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .news-date {
            color: #666;
            font-size: 12px;
            margin-bottom: 12px;
        }

        .news-item p {
            color: #a0a0a0;
            line-height: 1.6;
            font-size: 14px;
        }

        @media (max-width: 1024px) {
            .dashboard-sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .dashboard-main {
                margin-left: 0;
            }
        }

        @media (max-width: 768px) {
            .hero-content h1 {
                font-size: 40px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="bg-gradient"></div>

    <!-- Landing Page -->
    <div id="landing">
        <div class="container">
            <nav>
                <div class="logo">
                    <div class="shield-icon">üõ°Ô∏è</div>
                    ScamShield
                </div>
            </nav>

            <div class="hero">
                <div class="hero-content">
                    <h1>Advanced Threat Detection</h1>
                    <p>Protect yourself from online scams with AI-powered analysis</p>
                    <button class="cta-button" onclick="showDashboard()">Get Started</button>
                </div>
            </div>
        </div>

        <!-- Features Section -->
        <section id="features" class="landing-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Features</h2>
                    <p class="section-subtitle">Comprehensive protection tools designed to keep you safe from online threats</p>
                </div>
                
                <div class="features">
                    <div class="feature-card">
                        <div class="feature-icon">üìû</div>
                        <h3>Phone Scanner</h3>
                        <p>Verify phone numbers against known scam databases and identify suspicious calling patterns.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üí¨</div>
                        <h3>Message Analyzer</h3>
                        <p>Intelligent text analysis scans messages for suspicious keywords and common scam indicators.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üé§</div>
                        <h3>Voice Analyzer</h3>
                        <p>Detect AI-generated voices and voice spoofing attempts in audio recordings.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üîó</div>
                        <h3>Link Verifier</h3>
                        <p>Comprehensive URL verification examines web addresses for malicious domains.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üñºÔ∏è</div>
                        <h3>Image Searcher</h3>
                        <p>Reverse image search to identify fake profiles and stolen photos.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üì∞</div>
                        <h3>Latest Scams</h3>
                        <p>Stay updated with recent scam reports and security alerts.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Our Impact Section -->
        <section id="our-impact" class="landing-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Our Impact</h2>
                    <p class="section-subtitle">Making a difference in the fight against online scams and fraud</p>
                </div>
                
                <div class="impact-stats">
                    <div class="impact-card">
                        <span class="impact-number">2.5M+</span>
                        <div class="impact-label">Scams Detected</div>
                        <p class="impact-description">Successfully identified and prevented millions of fraudulent attempts</p>
                    </div>
                    <div class="impact-card">
                        <span class="impact-number">500K+</span>
                        <div class="impact-label">Users Protected</div>
                        <p class="impact-description">Active community of users staying safe with our platform</p>
                    </div>
                    <div class="impact-card">
                        <span class="impact-number">$15M+</span>
                        <div class="impact-label">Losses Prevented</div>
                        <p class="impact-description">Total amount of money saved from potential scam losses</p>
                    </div>
                    <div class="impact-card">
                        <span class="impact-number">99.7%</span>
                        <div class="impact-label">Accuracy Rate</div>
                        <p class="impact-description">Industry-leading detection accuracy with minimal false positives</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Intelligence Section -->
        <section id="intelligence" class="landing-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Intelligence</h2>
                    <p class="section-subtitle">Advanced AI-powered threat intelligence and real-time protection systems</p>
                </div>
                
                <div class="intelligence-grid">
                    <div class="intelligence-card">
                        <div class="intelligence-icon">ü§ñ</div>
                        <h3>AI-Powered Detection</h3>
                        <p>Our machine learning algorithms continuously learn from new threats and adapt to emerging scam patterns.</p>
                        <ul class="intelligence-features">
                            <li>Real-time pattern recognition</li>
                            <li>Behavioral analysis</li>
                            <li>Adaptive learning system</li>
                            <li>Predictive threat modeling</li>
                        </ul>
                    </div>
                    <div class="intelligence-card">
                        <div class="intelligence-icon">üåê</div>
                        <h3>Global Threat Network</h3>
                        <p>Connected to international databases and threat intelligence feeds for comprehensive protection.</p>
                        <ul class="intelligence-features">
                            <li>Global scam database access</li>
                            <li>Real-time threat feeds</li>
                            <li>Cross-platform intelligence</li>
                            <li>International collaboration</li>
                        </ul>
                    </div>
                    <div class="intelligence-card">
                        <div class="intelligence-icon">‚ö°</div>
                        <h3>Instant Analysis</h3>
                        <p>Lightning-fast processing ensures immediate threat detection and response capabilities.</p>
                        <ul class="intelligence-features">
                            <li>Sub-second analysis</li>
                            <li>Cloud-based processing</li>
                            <li>Scalable infrastructure</li>
                            <li>24/7 monitoring</li>
                        </ul>
                    </div>
                    <div class="intelligence-card">
                        <div class="intelligence-icon">üîí</div>
                        <h3>Privacy Protection</h3>
                        <p>Advanced security measures ensure your data remains private while providing maximum protection.</p>
                        <ul class="intelligence-features">
                            <li>End-to-end encryption</li>
                            <li>Zero-knowledge architecture</li>
                            <li>GDPR compliant</li>
                            <li>No data retention</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Navigation Dots -->
        <div class="section-nav">
            <div class="nav-dot active" onclick="scrollToSection('landing')"></div>
            <div class="nav-dot" onclick="scrollToSection('features')"></div>
            <div class="nav-dot" onclick="scrollToSection('our-impact')"></div>
            <div class="nav-dot" onclick="scrollToSection('intelligence')"></div>
        </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard">
        <div class="dashboard-sidebar">
            <div class="sidebar-logo">
                <div class="shield-icon">üõ°Ô∏è</div>
                <span>ScamShield</span>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-section-title">Dashboard</div>
                <div class="sidebar-item active" onclick="showSection('overview')">
                    <span class="sidebar-item-icon">üìä</span>
                    Overview
                </div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-section-title">Tools</div>
                <div class="sidebar-item" onclick="showSection('phone')">
                    <span class="sidebar-item-icon">üìû</span>
                    Phone Scanner
                </div>
                <div class="sidebar-item" onclick="showSection('message')">
                    <span class="sidebar-item-icon">üí¨</span>
                    Message Analyzer
                </div>
                <div class="sidebar-item" onclick="showSection('voice')">
                    <span class="sidebar-item-icon">üé§</span>
                    Voice Analyzer
                </div>
                <div class="sidebar-item" onclick="showSection('link')">
                    <span class="sidebar-item-icon">üîó</span>
                    Link Verifier
                </div>
                <div class="sidebar-item" onclick="showSection('image')">
                    <span class="sidebar-item-icon">üñºÔ∏è</span>
                    Image Searcher
                </div>
                <div class="sidebar-item" onclick="showSection('news')">
                    <span class="sidebar-item-icon">üì∞</span>
                    Latest Scams
                </div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-section-title">Account</div>
                <div class="sidebar-item" onclick="showLanding()">
                    <span class="sidebar-item-icon">‚Üê</span>
                    Back to Home
                </div>
            </div>
        </div>

        <div class="dashboard-main">
            <!-- Overview Section -->
            <div id="overview-section" class="content-section active">
                <div class="dashboard-header">
                    <div class="dashboard-title">
                        <h1>Overview</h1>
                        <span class="badge">Personal Stats</span>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-label">Scans Performed</span>
                            <div class="stat-icon">üîç</div>
                        </div>
                        <div class="stat-value" id="totalScans">0</div>
                        <div class="stat-change" id="mostUsedFeature">Most used: N/A</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-label">Threats Detected</span>
                            <div class="stat-icon">üõ°Ô∏è</div>
                        </div>
                        <div class="stat-value" id="totalThreats">0</div>
                        <div class="stat-change" id="threatBreakdown">High: 0 | Med: 0 | Low: 0</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-label">Risk Level</span>
                            <div class="stat-icon">üìä</div>
                        </div>
                        <div class="stat-value" id="riskPercentage">0%</div>
                        <div class="stat-change" id="riskCategory">Overall: Low Risk</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-label">Days Protected</span>
                            <div class="stat-icon">üî•</div>
                        </div>
                        <div class="stat-value" id="dayStreak">0</div>
                        <div class="stat-change" id="streakMessage">Start your protection journey!</div>
                    </div>
                </div>
            </div>

            <!-- Phone Scanner Section -->
            <div id="phone-section" class="content-section">
                <div class="dashboard-header">
                    <div class="dashboard-title">
                        <h1>Phone Scanner</h1>
                        <span class="badge">Fraud Detection</span>
                    </div>
                </div>

                <div class="feature-container">
                    <div class="feature-main-card">
                        <div class="feature-header">
                            <div class="feature-icon-large">üìû</div>
                            <h2>Verify Phone Numbers</h2>
                        </div>

                        <div class="tech-info">
                            <h3>How It Works</h3>
                            <p>Our phone scanner analyzes number patterns, geographic data, and carrier information to identify potentially fraudulent phone numbers. The system checks against databases of known scam numbers, validates area codes, and detects number spoofing patterns commonly used by scammers. It also identifies VOIP numbers often used in scam operations.</p>
                        </div>

                        <input type="text" id="phoneInput" placeholder="Enter phone number (e.g., +1-555-123-4567)" style="min-height: auto;">
                        <button class="scan-button" onclick="scanPhone()">Scan Phone Number</button>
                        <div class="result" id="phoneResult"></div>
                    </div>
                </div>
            </div>

            <!-- Image Searcher Section -->
            <div id="image-section" class="content-section">
                <div class="dashboard-header">
                    <div class="dashboard-title">
                        <h1>Image Searcher</h1>
                        <span class="badge">Reverse Search</span>
                    </div>
                </div>

                <div class="feature-container">
                    <div class="feature-main-card">
                        <div class="feature-header">
                            <div class="feature-icon-large">üñºÔ∏è</div>
                            <h2>Search Images</h2>
                        </div>

                        <div class="tech-info">
                            <h3>How It Works</h3>
                            <p>Reverse image search technology identifies whether profile pictures or shared images have been stolen from other sources. The system uses image fingerprinting and visual similarity algorithms to locate identical or modified versions of images across the internet. This helps detect catfishing attempts, fake social media profiles, and stolen identity photos commonly used in romance scams and impersonation fraud.</p>
                        </div>

                        <input type="text" id="imageInput" placeholder="Enter image URL or describe the image..." style="min-height: auto;">
                        
                        <div class="upload-section" style="margin: 16px 0;">
                            <label for="imageFileInput" class="upload-label">
                                üìÅ Upload Image from Device
                            </label>
                            <input type="file" id="imageFileInput" accept="image/*" style="display: none;" onchange="handleImageUpload(event)">
                            <div id="imagePreview" class="file-preview"></div>
                        </div>
                        
                        <button class="scan-button" onclick="scanImage()">Search Image</button>
                        <div class="result" id="imageResult"></div>
                    </div>
                </div>
            </div>

              <!-- Message Analyzer Section -->
            <div id="message-section" class="content-section">
                <div class="dashboard-header">
                    <div class="dashboard-title">
                        <h1>Message Analyzer</h1>
                        <span class="badge">AI Powered</span>
                    </div>
                </div>

                <div class="feature-container">
                    <div class="feature-main-card">
                        <div class="feature-header">
                            <div class="feature-icon-large">üí¨</div>
                            <h2>AI Scam Detection</h2>
                        </div>

                        <div class="tech-info">
                            <h3>How It Works</h3>
                            <p>Powered by Google's Gemini AI, our advanced language model analyzes emails, text messages, and social media messages for scam patterns. It detects phishing attempts, social engineering tactics, financial fraud, romance scams, and other deceptive communications with high accuracy using natural language understanding.</p>
                        </div>

                        <textarea id="messageInput" placeholder="Paste your email, text message, or any suspicious communication here..." style="min-height: 150px; resize: vertical;"></textarea>
                        
                        <div class="analysis-options" style="margin: 16px 0;">
                            <label style="display: flex; align-items: center; gap: 8px; color: #a0a0a0; font-size: 14px;">
                                <input type="checkbox" id="detailedAnalysis" checked style="margin: 0;">
                                Detailed AI analysis with explanations
                            </label>
                        </div>
                        
                        <button class="scan-button" onclick="scanMessage()" disabled id="messageAnalyzeButton">Enter Message to Analyze</button>
                        <div class="result" id="messageResult"></div>
                    </div>
                </div>
            </div>

            <!-- Voice Analyzer Section -->
            <div id="voice-section" class="content-section">
                <div class="dashboard-header">
                    <div class="dashboard-title">
                        <h1>Voice Analyzer</h1>
                        <span class="badge">AI Detection</span>
                    </div>
                </div>

                <div class="feature-container">
                    <div class="feature-main-card">
                        <div class="feature-header">
                            <div class="feature-icon-large">üé§</div>
                            <h2>AI Voice Detection</h2>
                        </div>

                        <div class="tech-info">
                            <h3>How It Works</h3>
                            <p>Advanced AI-powered voice analysis using a local Python backend with free libraries (librosa, speech recognition). The system transcribes audio content using Google Speech Recognition to detect scam phrases, urgency tactics, and suspicious requests, while simultaneously analyzing audio characteristics like pitch, speech rate, and volume patterns. Provides comprehensive protection against voice scams without requiring paid API keys.</p>
                        </div>
                        
                        <div class="upload-section" style="margin: 16px 0;">
                            <label for="audioFileInput" class="upload-label">
                                ÔøΩ Upload Audio File for AI Analysis
                            </label>
                            <input type="file" id="audioFileInput" accept="audio/*,.mp3,.wav,.m4a,.aac,.ogg" style="display: none;" onchange="handleAudioUpload(event)">
                            <div id="audioPreview" class="file-preview"></div>
                        </div>
                        
                        <button class="scan-button" onclick="scanVoice()" disabled id="analyzeButton">Upload Audio File First</button>
                        <div class="result" id="voiceResult"></div>
                    </div>
                </div>
            </div>

            <!-- Link Verifier Section -->
            <div id="link-section" class="content-section">
                <div class="dashboard-header">
                    <div class="dashboard-title">
                        <h1>Link Verifier</h1>
                        <span class="badge">URL Security</span>
                    </div>
                </div>

                <div class="feature-container">
                    <div class="feature-main-card">
                        <div class="feature-header">
                            <div class="feature-icon-large">üîó</div>
                            <h2>Verify Links</h2>
                        </div>

                        <div class="tech-info">
                            <h3>How It Works</h3>
                            <p>Multi-layer URL analysis checks domain reputation, SSL certificate validity, and URL structure for malicious patterns. The system examines domain age, registrar information, and checks against blacklists of known phishing sites. It also detects URL obfuscation techniques, suspicious redirects, and typosquatting attempts used to trick users.</p>
                        </div>

                        <input type="text" id="linkInput" placeholder="Enter URL to verify (e.g., https://example.com)" style="min-height: auto;">
                        <button class="scan-button" onclick="scanLink()">Verify Link</button>
                        <div class="result" id="linkResult"></div>
                    </div>
                </div>
            </div>

            <!-- Latest Scams Section -->
            <div id="news-section" class="content-section">
                <div class="dashboard-header">
                    <div class="dashboard-title">
                        <h1>Latest Scams</h1>
                        <span class="badge">Security Updates</span>
                    </div>
                </div>

                <div class="feature-container">
                    <div class="tech-info">
                        <h3>How It Works</h3>
                        <p>Real-time monitoring of security reports, user submissions, and cybersecurity databases keeps you informed about emerging scam tactics. Our system aggregates threat intelligence from multiple sources including government agencies, cybersecurity firms, and community reports to provide timely alerts about new fraud schemes targeting individuals and businesses.</p>
                    </div>

                    <div class="news-grid">
                        <div class="news-item">
                            <h3>üö® AI Voice Cloning Scams Surge</h3>
                            <div class="news-date">October 2, 2025</div>
                            <p>Scammers are using AI voice cloning technology to impersonate family members in distress. They collect voice samples from social media and use them to create convincing emergency calls requesting money transfers. Always verify through alternative contact methods.</p>
                        </div>

                        <div class="news-item">
                            <h3>‚ö†Ô∏è Fake Delivery Notification Campaign</h3>
                            <div class="news-date">September 28, 2025</div>
                            <p>Mass SMS phishing campaign targeting online shoppers with fake delivery notifications. Messages contain links to credential-harvesting sites mimicking major courier services. Verify all delivery notifications directly through retailer apps or official tracking systems.</p>
                        </div>

                        <div class="news-item">
                            <h3>üí∞ Cryptocurrency Investment Fraud Alert</h3>
                            <div class="news-date">September 25, 2025</div>
                            <p>Sophisticated investment scams using fake celebrity endorsements and guaranteed returns promises. Fraudulent platforms show fake profits to encourage larger investments before disappearing. Verify all investment opportunities through regulatory databases.</p>
                        </div>

                        <div class="news-item">
                            <h3>üè¶ Bank Impersonation Phone Calls</h3>
                            <div class="news-date">September 20, 2025</div>
                            <p>Scammers spoofing legitimate bank phone numbers to request account verification. They create urgency claiming suspicious activity detected. Banks never call requesting full passwords or one-time codes. Contact your bank directly using official channels.</p>
                        </div>

                        <div class="news-item">
                            <h3>üìß Tax Authority Phishing Campaign</h3>
                            <div class="news-date">September 15, 2025</div>
                            <p>Email scam claiming tax refund pending or urgent tax issues requiring immediate action. Messages contain malicious links or request sensitive financial information. Tax authorities communicate primarily through postal mail, not unsolicited emails.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // User stats stored in memory
        let userStats = {
            totalScans: 0,
            phoneScans: 0,
            messageScans: 0,
            voiceScans: 0,
            linkScans: 0,
            imageScans: 0,
            highRiskThreats: 0,
            mediumRiskThreats: 0,
            lowRiskThreats: 0,
            firstVisit: null,
            lastVisit: null
        };

        // Cookie helper functions
        function setCookie(name, value, days) {
            const d = new Date();
            d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
            const expires = "expires=" + d.toUTCString();
            document.cookie = name + "=" + JSON.stringify(value) + ";" + expires + ";path=/";
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for(let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) {
                    try {
                        return JSON.parse(c.substring(nameEQ.length, c.length));
                    } catch(e) {
                        return null;
                    }
                }
            }
            return null;
        }

        // Initialize stats on page load
        function initializeStats() {
            const savedStats = getCookie('scamshield_stats');
            if (savedStats) {
                userStats = savedStats;
            } else {
                userStats.firstVisit = new Date().toISOString();
            }
            userStats.lastVisit = new Date().toISOString();
            saveStats();
            updateDashboard();
        }

        // Save stats to cookies
        function saveStats() {
            setCookie('scamshield_stats', userStats, 365);
        }

        // Update dashboard display
        function updateDashboard() {
            // Total scans
            document.getElementById('totalScans').textContent = userStats.totalScans;
            
            // Most used feature
            const features = [
                { name: 'Phone Scanner', count: userStats.phoneScans },
                { name: 'Message Analyzer', count: userStats.messageScans },
                { name: 'Voice Analyzer', count: userStats.voiceScans },
                { name: 'Link Verifier', count: userStats.linkScans },
                { name: 'Image Searcher', count: userStats.imageScans }
            ];
            
            const mostUsed = features.reduce((max, feature) => 
                feature.count > max.count ? feature : max, features[0]);
            
            const mostUsedText = mostUsed.count > 0 ? mostUsed.name : 'N/A';
            document.getElementById('mostUsedFeature').textContent = 'Most used: ' + mostUsedText;
            
            // Total threats
            const totalThreats = userStats.highRiskThreats + userStats.mediumRiskThreats + userStats.lowRiskThreats;
            document.getElementById('totalThreats').textContent = totalThreats;
            document.getElementById('threatBreakdown').textContent = 
                `High: ${userStats.highRiskThreats} | Med: ${userStats.mediumRiskThreats} | Low: ${userStats.lowRiskThreats}`;
            
            // Risk level calculation
            let riskPercentage = 0;
            if (userStats.totalScans > 0) {
                riskPercentage = ((totalThreats / userStats.totalScans) * 100).toFixed(1);
            }
            document.getElementById('riskPercentage').textContent = riskPercentage + '%';
            
            let riskCategory = 'Low Risk';
            if (riskPercentage >= 50) {
                riskCategory = 'High Risk';
            } else if (riskPercentage >= 25) {
                riskCategory = 'Medium Risk';
            }
            document.getElementById('riskCategory').textContent = 'Overall: ' + riskCategory;
            
            // Days protected (streak)
            let dayStreak = 0;
            if (userStats.firstVisit) {
                const first = new Date(userStats.firstVisit);
                const today = new Date();
                dayStreak = Math.floor((today - first) / (1000 * 60 * 60 * 24)) + 1;
            }
            document.getElementById('dayStreak').textContent = dayStreak;
            
            let streakMessage = 'Start your protection journey!';
            if (dayStreak > 0) {
                streakMessage = dayStreak === 1 ? 'Keep it up!' : `${dayStreak} day${dayStreak > 1 ? 's' : ''} of protection!`;
            }
            document.getElementById('streakMessage').textContent = streakMessage;
        }

        function showDashboard() {
            document.getElementById('landing').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            initializeStats();
        }

        function showLanding() {
            document.getElementById('landing').style.display = 'flex';
            document.getElementById('dashboard').style.display = 'none';
        }

        function showSection(sectionName) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
            });
            
            document.getElementById(sectionName + '-section').classList.add('active');
            event.currentTarget.classList.add('active');
        }

        function scanPhone() {
            const phone = document.getElementById('phoneInput').value;
            const result = document.getElementById('phoneResult');
            
            if (!phone.trim()) {
                alert('Please enter a phone number');
                return;
            }

            userStats.totalScans++;
            userStats.phoneScans++;

            const phonePattern = /^[\+]?[(]?[0-9]{1,3}[)]?[-\s\.]?[(]?[0-9]{1,4}[)]?[-\s\.]?[0-9]{1,4}[-\s\.]?[0-9]{1,9}$/;
            let score = 0;
            
            if (!phonePattern.test(phone)) score += 1;
            if (phone.includes('000') || phone.includes('111')) score += 1;
            if (phone.length < 10) score += 2;
            
            result.style.display = 'block';
            
            if (score >= 2) {
                result.className = 'result danger';
                result.innerHTML = '<strong>‚ö†Ô∏è High Risk Number</strong><br>This number shows suspicious patterns. Proceed with extreme caution and verify through alternative channels.';
                userStats.highRiskThreats++;
            } else if (score >= 1) {
                result.className = 'result warning';
                result.innerHTML = '<strong>‚ö° Caution Advised</strong><br>Number format appears unusual. Verify legitimacy before sharing sensitive information.';
                userStats.mediumRiskThreats++;
            } else {
                result.className = 'result safe';
                result.innerHTML = '<strong>‚úì Format Valid</strong><br>Number format appears standard. However, always verify caller identity independently.';
                userStats.lowRiskThreats++;
            }

            saveStats();
            updateDashboard();
        }

        async function scanMessage() {
            const text = document.getElementById('messageInput').value;
            const result = document.getElementById('messageResult');
            const detailedAnalysis = document.getElementById('detailedAnalysis').checked;
            
            if (!text.trim()) {
                alert('Please enter message text to analyze');
                return;
            }

            userStats.totalScans++;
            userStats.messageScans++;

            // Show loading state
            result.style.display = 'block';
            result.className = 'result loading';
            result.innerHTML = '<div class="loading-spinner"></div><strong>ü§ñ AI Analysis in Progress...</strong><br>Analyzing message with Gemini AI, please wait...';

            try {
                await analyzeMessageWithGemini(text, result, detailedAnalysis);
            } catch (error) {
                console.error('Gemini API error:', error);
                result.className = 'result warning';
                result.innerHTML = '<strong>‚ö†Ô∏è Analysis Error</strong><br>Unable to connect to Gemini AI. Falling back to basic analysis.';
                performBasicMessageAnalysis(text, result);
            }

            saveStats();
            updateDashboard();
        }

        // Gemini AI integration for message analysis
        async function analyzeMessageWithGemini(messageText, resultElement, detailed = true) {
            // Gemini API key
            const GEMINI_API_KEY = 'AIzaSyAMEDrP9ul0zLTmEuWp_1LRlCuOKxITkdI';
            const GEMINI_API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${GEMINI_API_KEY}`;

            const prompt = detailed ? 
                `You are an expert cybersecurity analyst specializing in scam detection. Analyze the following message for potential scam indicators and provide a detailed assessment.

Message to analyze:
"${messageText}"

Please provide a JSON response with the following structure:
{
    "scam_probability": 0.0-1.0,
    "risk_level": "low|medium|high", 
    "scam_type": "phishing|social_engineering|financial_fraud|romance_scam|tech_support|other|legitimate",
    "confidence": 0.0-1.0,
    "key_indicators": ["list", "of", "suspicious", "elements"],
    "explanation": "Detailed explanation of why this message is or isn't a scam",
    "recommendations": ["specific", "actions", "to", "take"]
}

Focus on detecting:
- Urgency tactics and pressure
- Requests for personal/financial information  
- Impersonation attempts
- Suspicious links or attachments
- Grammar and language patterns
- Social engineering techniques
- Emotional manipulation
- Too-good-to-be-true offers

Be thorough but concise in your analysis.` :
                `Analyze this message for scam indicators and respond with JSON: {"scam_probability": 0.0-1.0, "risk_level": "low|medium|high", "scam_type": "type"}

Message: "${messageText}"`;

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: prompt
                            }]
                        }]
                    })
                });

                if (!response.ok) {
                    throw new Error(`Gemini API error: ${response.status}`);
                }

                const data = await response.json();
                const aiResponse = data.candidates[0].content.parts[0].text;
                
                // Try to parse JSON response
                let analysis;
                try {
                    analysis = JSON.parse(aiResponse);
                } catch (e) {
                    // If not JSON, parse text response
                    analysis = parseTextResponse(aiResponse);
                }

                processGeminiResults(analysis, messageText, resultElement);

            } catch (error) {
                console.error('Gemini API error:', error);
                throw error;
            }
        }

        // Process Gemini AI results
        function processGeminiResults(analysis, originalText, resultElement) {
            const scamProbability = analysis.scam_probability || 0;
            const riskLevel = analysis.risk_level || 'low';
            const scamType = analysis.scam_type || 'unknown';
            const confidence = analysis.confidence || 0.5;
            const keyIndicators = analysis.key_indicators || [];
            const explanation = analysis.explanation || 'Analysis completed';
            const recommendations = analysis.recommendations || [];

            // Determine threat level
            let threatLevel = 'safe';
            let threatMessage = '';
            
            if (scamProbability >= 0.7 || riskLevel === 'high') {
                threatLevel = 'danger';
                threatMessage = '‚ö†Ô∏è HIGH RISK SCAM DETECTED';
                userStats.highRiskThreats++;
            } else if (scamProbability >= 0.4 || riskLevel === 'medium') {
                threatLevel = 'warning';
                threatMessage = '‚ö° SUSPICIOUS MESSAGE - CAUTION ADVISED';
                userStats.mediumRiskThreats++;
            } else if (scamProbability >= 0.2) {
                threatLevel = 'warning';
                threatMessage = '‚ö° MINOR CONCERNS DETECTED';
                userStats.mediumRiskThreats++;
            } else {
                threatLevel = 'safe';
                threatMessage = '‚úÖ LIKELY LEGITIMATE MESSAGE';
                userStats.lowRiskThreats++;
            }

            // Display results
            resultElement.className = `result ${threatLevel}`;
            resultElement.innerHTML = `
                <strong>${threatMessage}</strong><br>
                <strong>üéØ Scam Probability:</strong> ${(scamProbability * 100).toFixed(1)}%<br>
                <strong>üìä Risk Level:</strong> ${riskLevel.toUpperCase()}<br>
                <strong>üè∑Ô∏è Scam Type:</strong> ${scamType.replace('_', ' ').toUpperCase()}<br>
                <strong>üé≤ AI Confidence:</strong> ${(confidence * 100).toFixed(1)}%<br>
                ${keyIndicators.length > 0 ? `<strong>üö© Key Indicators:</strong> ${keyIndicators.join(', ')}<br>` : ''}
                <br>
                <strong>üìù AI Analysis:</strong><br>
                <div style="background: rgba(0,0,0,0.3); padding: 12px; border-radius: 6px; margin: 8px 0; font-size: 13px; line-height: 1.5;">
                    ${explanation}
                </div>
                ${recommendations.length > 0 ? `
                <strong>üí° Recommendations:</strong><br>
                <ul style="margin: 8px 0; padding-left: 20px; font-size: 13px;">
                    ${recommendations.map(rec => `<li>${rec}</li>`).join('')}
                </ul>` : ''}
                <br>
                <small style="color: #666;">‚ö° Powered by Google Gemini AI</small>
            `;
        }

        // Parse text response if JSON parsing fails
        function parseTextResponse(textResponse) {
            // Simple parsing for non-JSON responses
            const lowerResponse = textResponse.toLowerCase();
            let scamProbability = 0.3; // default
            let riskLevel = 'medium';
            
            if (lowerResponse.includes('high risk') || lowerResponse.includes('definitely a scam') || lowerResponse.includes('clearly fraudulent')) {
                scamProbability = 0.8;
                riskLevel = 'high';
            } else if (lowerResponse.includes('likely scam') || lowerResponse.includes('suspicious') || lowerResponse.includes('probably fraudulent')) {
                scamProbability = 0.6;
                riskLevel = 'medium';
            } else if (lowerResponse.includes('legitimate') || lowerResponse.includes('not a scam') || lowerResponse.includes('safe')) {
                scamProbability = 0.1;
                riskLevel = 'low';
            }

            return {
                scam_probability: scamProbability,
                risk_level: riskLevel,
                scam_type: 'unknown',
                confidence: 0.7,
                key_indicators: [],
                explanation: textResponse,
                recommendations: ['Verify sender identity', 'Do not click suspicious links', 'Contact authorities if needed']
            };
        }

        // Fallback basic analysis
        function performBasicMessageAnalysis(messageText, resultElement) {
            const scamKeywords = ['urgent', 'verify account', 'suspended', 'click here', 'confirm password', 
                                  'prize', 'winner', 'congratulations', 'act now', 'limited time', 
                                  'bank account', 'social security', 'tax refund', 'inheritance',
                                  'verify identity', 'update payment', 'account locked', 'unusual activity'];
            
            let score = 0;
            const lowerText = messageText.toLowerCase();
            const foundKeywords = [];
            
            scamKeywords.forEach(keyword => {
                if (lowerText.includes(keyword)) {
                    score += 1;
                    foundKeywords.push(keyword);
                }
            });

            if ((messageText.match(/!/g) || []).length > 3) score += 1;
            if (messageText === messageText.toUpperCase() && messageText.length > 20) score += 1;
            if (lowerText.includes('click') || lowerText.includes('link')) score += 0.5;

            let threatLevel, message;
            if (score >= 3) {
                threatLevel = 'danger';
                message = '‚ö†Ô∏è HIGH RISK - Multiple Scam Indicators';
                userStats.highRiskThreats++;
            } else if (score >= 1) {
                threatLevel = 'warning';
                message = '‚ö° SUSPICIOUS - Some Risk Indicators';
                userStats.mediumRiskThreats++;
            } else {
                threatLevel = 'safe';
                message = '‚úÖ LOW RISK - No Major Red Flags';
                userStats.lowRiskThreats++;
            }
            
            resultElement.className = `result ${threatLevel}`;
            resultElement.innerHTML = `
                <strong>${message}</strong><br>
                <strong>Analysis Method:</strong> Basic Pattern Matching<br>
                <strong>Suspicious Keywords Found:</strong> ${foundKeywords.length > 0 ? foundKeywords.join(', ') : 'None'}<br>
                <strong>Risk Score:</strong> ${score.toFixed(1)}/10<br>
                <br><strong>Note:</strong> For more accurate results, please configure Gemini API key.
            `;
        }

        async function scanVoice() {
            const result = document.getElementById('voiceResult');
            const fileInput = document.getElementById('audioFileInput');
            
            if (!fileInput.files.length) {
                alert('Please upload an audio file to analyze');
                return;
            }

            const file = fileInput.files[0];
            userStats.totalScans++;
            userStats.voiceScans++;

            // Show loading state
            result.style.display = 'block';
            result.className = 'result loading';
            result.innerHTML = '<div class="loading-spinner"></div><strong>ü§ñ AI Analysis in Progress...</strong><br>Analyzing ' + file.name + ' with Python backend...';

            try {
                await analyzeAudioWithPython(file, result);
            } catch (error) {
                console.error('Voice analysis error:', error);
                result.className = 'result danger';
                result.innerHTML = '<strong>‚ö†Ô∏è Analysis Failed</strong><br>Error: ' + error.message + '<br><br>Make sure the Python backend is running on http://localhost:5001';
            }

            saveStats();
            updateDashboard();
        }

        // Python backend integration for voice analysis
        async function analyzeAudioWithPython(file, resultElement) {
            const PYTHON_API_URL = 'http://localhost:5001/analyze';
            
            // Create form data
            const formData = new FormData();
            formData.append('audio', file);
            
            try {
                const response = await fetch(PYTHON_API_URL, {
                    method: 'POST',
                    body: formData
                });
                
                if (!response.ok) {
                    throw new Error(`Server error: ${response.status} - ${response.statusText}`);
                }
                
                const analysisResult = await response.json();
                
                if (analysisResult.success) {
                    processPythonResults(analysisResult, file.name, resultElement);
                } else {
                    throw new Error(analysisResult.message || 'Analysis failed');
                }
            } catch (error) {
                console.error('Python backend error:', error);
                // Fallback to basic local analysis if backend is not available
                if (error.message.includes('fetch')) {
                    throw new Error('Cannot connect to Python backend. Please make sure the server is running on localhost:5001');
                } else {
                    throw error;
                }
            }
        }

        // OpenAI Whisper API transcription
        async function transcribeWithWhisper(audioFile) {
            const OPENAI_API_KEY = 'YOUR_OPENAI_API_KEY_HERE'; // You'll need to add your OpenAI API key
            const WHISPER_API_URL = 'https://api.openai.com/v1/audio/transcriptions';

            const formData = new FormData();
            formData.append('file', audioFile);
            formData.append('model', 'whisper-1');
            formData.append('response_format', 'json');
            formData.append('language', 'en'); // Auto-detect or specify language

            try {
                const response = await fetch(WHISPER_API_URL, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${OPENAI_API_KEY}`,
                    },
                    body: formData
                });

                if (!response.ok) {
                    throw new Error(`Whisper API error: ${response.status}`);
                }

                const data = await response.json();
                return {
                    transcription: data.text,
                    success: true
                };
            } catch (error) {
                console.error('Whisper transcription error:', error);
                return {
                    transcription: '',
                    success: false,
                    error: error.message
                };
            }
        }

        // Local audio analysis using Web Audio API (FREE)
        async function analyzeAudioLocally(file) {
            return new Promise((resolve, reject) => {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const reader = new FileReader();
                
                reader.onload = async function(e) {
                    try {
                        const arrayBuffer = e.target.result;
                        const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);
                        
                        // Extract audio features for AI detection
                        const channelData = audioBuffer.getChannelData(0);
                        const sampleRate = audioBuffer.sampleRate;
                        const duration = audioBuffer.duration;
                        
                        // Calculate various audio characteristics
                        const analysis = {
                            duration: duration,
                            sampleRate: sampleRate,
                            channels: audioBuffer.numberOfChannels,
                            // Calculate RMS (Root Mean Square) for loudness analysis
                            rms: calculateRMS(channelData),
                            // Calculate zero crossing rate (indicates voice naturalness)
                            zeroCrossingRate: calculateZeroCrossingRate(channelData),
                            // Calculate spectral centroid (frequency characteristics)
                            spectralCentroid: calculateSpectralCentroid(channelData, sampleRate),
                            // Calculate dynamic range
                            dynamicRange: calculateDynamicRange(channelData),
                            // File size vs duration ratio
                            compressionRatio: file.size / (duration * sampleRate * 2), // bytes per sample
                        };
                        
                        resolve(analysis);
                    } catch (error) {
                        reject(error);
                    }
                };
                
                reader.onerror = () => reject(new Error('Failed to read audio file'));
                reader.readAsArrayBuffer(file);
            });
        }

        // Audio analysis helper functions
        function calculateRMS(channelData) {
            let sum = 0;
            for (let i = 0; i < channelData.length; i++) {
                sum += channelData[i] * channelData[i];
            }
            return Math.sqrt(sum / channelData.length);
        }

        function calculateZeroCrossingRate(channelData) {
            let crossings = 0;
            for (let i = 1; i < channelData.length; i++) {
                if ((channelData[i] >= 0) !== (channelData[i - 1] >= 0)) {
                    crossings++;
                }
            }
            return crossings / channelData.length;
        }

        function calculateSpectralCentroid(channelData, sampleRate) {
            // Simplified spectral centroid calculation
            const fftSize = 1024;
            let weightedSum = 0;
            let magnitudeSum = 0;
            
            for (let i = 0; i < Math.min(fftSize, channelData.length); i++) {
                const magnitude = Math.abs(channelData[i]);
                const frequency = (i * sampleRate) / fftSize;
                weightedSum += frequency * magnitude;
                magnitudeSum += magnitude;
            }
            
            return magnitudeSum > 0 ? weightedSum / magnitudeSum : 0;
        }

        function calculateDynamicRange(channelData) {
            let max = -Infinity;
            let min = Infinity;
            
            for (let i = 0; i < channelData.length; i++) {
                max = Math.max(max, channelData[i]);
                min = Math.min(min, channelData[i]);
            }
            
            return max - min;
        }



        // Process Whisper + local analysis results
        function processWhisperResults(transcriptionResult, audioData, fileName, resultElement) {
            let aiProbability = 0;
            let analysisDetails = [];
            let suspiciousFactors = [];

            // Analyze transcription for scam content if available
            if (transcriptionResult.success && transcriptionResult.transcription) {
                const transcript = transcriptionResult.transcription.toLowerCase();
                
                // Check for common scam phrases in the transcription
                const scamPhrases = [
                    'urgent', 'immediately', 'suspend', 'verify', 'confirm',
                    'social security', 'bank account', 'credit card', 'password',
                    'winner', 'congratulations', 'prize', 'lottery', 'inheritance',
                    'bitcoin', 'cryptocurrency', 'investment opportunity',
                    'microsoft', 'apple', 'amazon', 'google', 'paypal',
                    'refund', 'tax', 'irs', 'government', 'police'
                ];

                let transcriptScore = 0;
                const foundPhrases = [];
                
                scamPhrases.forEach(phrase => {
                    if (transcript.includes(phrase)) {
                        transcriptScore += 0.1;
                        foundPhrases.push(phrase);
                    }
                });

                // Check for urgency and pressure tactics
                if (transcript.includes('act now') || transcript.includes('limited time') || 
                    transcript.includes('expires') || transcript.includes('hurry')) {
                    transcriptScore += 0.2;
                    suspiciousFactors.push('Urgency tactics detected in speech');
                }

                // Check for requests for sensitive information
                if (transcript.includes('social security') || transcript.includes('credit card') ||
                    transcript.includes('password') || transcript.includes('pin')) {
                    transcriptScore += 0.3;
                    suspiciousFactors.push('Requests for sensitive information');
                }

                // Check for impersonation
                if (transcript.includes('this is') && (transcript.includes('bank') || 
                    transcript.includes('microsoft') || transcript.includes('government'))) {
                    transcriptScore += 0.25;
                    suspiciousFactors.push('Potential impersonation attempt');
                }

                analysisDetails.push(`Transcription Available: Yes (${transcriptionResult.transcription.length} characters)`);
                if (foundPhrases.length > 0) {
                    analysisDetails.push(`Suspicious Keywords: ${foundPhrases.join(', ')}`);
                }
                
                aiProbability += transcriptScore;
            } else {
                analysisDetails.push('Transcription Available: No (using audio analysis only)');
            }

            // Add audio characteristic analysis (existing logic)
            let audioScore = 0;

            // Check zero crossing rate
            if (audioData.zeroCrossingRate < 0.1 || audioData.zeroCrossingRate > 0.5) {
                audioScore += 0.2;
                suspiciousFactors.push('Unusual speech pattern detected');
            }

            // Check dynamic range
            if (audioData.dynamicRange < 0.3) {
                audioScore += 0.25;
                suspiciousFactors.push('Limited dynamic range (possible synthetic)');
            }

            // Check RMS levels
            if (audioData.rms > 0.8 || audioData.rms < 0.05) {
                audioScore += 0.15;
                suspiciousFactors.push('Unnatural loudness levels');
            }

            // Check compression ratio
            if (audioData.compressionRatio < 0.5) {
                audioScore += 0.2;
                suspiciousFactors.push('High compression ratio');
            }

            // Check duration
            if (audioData.duration < 3) {
                audioScore += 0.1;
                suspiciousFactors.push('Very short audio duration');
            }

            aiProbability += audioScore;
            aiProbability = Math.min(aiProbability, 1.0); // Cap at 100%

            // Build technical details
            analysisDetails.push(`Duration: ${audioData.duration.toFixed(2)} seconds`);
            analysisDetails.push(`Sample Rate: ${audioData.sampleRate} Hz`);
            analysisDetails.push(`Channels: ${audioData.channels}`);
            analysisDetails.push(`AI Probability: ${(aiProbability * 100).toFixed(1)}%`);

            // Determine threat level
            let threatLevel = 'safe';
            let threatMessage = '';
            
            if (aiProbability >= 0.7) {
                threatLevel = 'danger';
                threatMessage = '‚ö†Ô∏è HIGH RISK: Likely Scam Call';
                userStats.highRiskThreats++;
            } else if (aiProbability >= 0.4) {
                threatLevel = 'warning';
                threatMessage = '‚ö° SUSPICIOUS: Potential Scam Indicators';
                userStats.mediumRiskThreats++;
            } else if (aiProbability >= 0.2) {
                threatLevel = 'warning';
                threatMessage = '‚ö° CAUTION: Some Concerns Detected';
                userStats.mediumRiskThreats++;
            } else {
                threatLevel = 'safe';
                threatMessage = '‚úì LIKELY LEGITIMATE';
                userStats.lowRiskThreats++;
            }

            // Display results with transcription
            resultElement.className = `result ${threatLevel}`;
            resultElement.innerHTML = `
                <strong>${threatMessage}</strong><br>
                <strong>File:</strong> ${fileName}<br>
                <strong>Analysis Method:</strong> OpenAI Whisper + Audio Analysis<br>
                ${transcriptionResult.success ? `
                <strong>üéôÔ∏è Transcription:</strong><br>
                <div style="background: rgba(0,0,0,0.3); padding: 12px; border-radius: 6px; margin: 8px 0; font-style: italic; font-size: 13px; line-height: 1.5; max-height: 100px; overflow-y: auto;">
                    "${transcriptionResult.transcription}"
                </div>` : ''}
                <strong>Suspicious Factors:</strong> ${suspiciousFactors.length > 0 ? suspiciousFactors.join(', ') : 'None detected'}<br>
                <strong>Technical Details:</strong><br>
                ${analysisDetails.join('<br>')}
                <br><br>
                <strong>Recommendation:</strong> ${getWhisperVoiceRecommendation(aiProbability, suspiciousFactors, transcriptionResult.success)}
                <br><br>
                <small style="color: #666;">ü§ñ Powered by OpenAI Whisper + Local Analysis</small>
            `;
        }

        // Get recommendation based on Whisper analysis
        function getWhisperVoiceRecommendation(aiProbability, suspiciousFactors, hasTranscription) {
            if (aiProbability >= 0.7) {
                return hasTranscription ? 
                    'HIGH RISK: The transcribed content contains multiple scam indicators. Do not provide any personal information, money, or access to accounts. Hang up immediately and report if possible.' :
                    'HIGH RISK: Multiple suspicious audio characteristics detected. Exercise extreme caution and verify caller identity through official channels.';
            } else if (aiProbability >= 0.4) {
                return hasTranscription ?
                    'SUSPICIOUS: The call content shows concerning patterns. Verify the caller\'s identity through official channels before sharing any sensitive information.' :
                    'SUSPICIOUS: Some concerning audio patterns found. Consider verifying the caller\'s identity, especially for sensitive requests.';
            } else if (aiProbability >= 0.2) {
                return 'CAUTION: Minor irregularities detected. While likely legitimate, always verify identity for important requests involving money or personal information.';
            } else {
                return hasTranscription ?
                    'The call content appears normal. However, always verify caller identity for sensitive requests regardless of content analysis.' :
                    'Audio characteristics appear normal. However, always verify identity for sensitive requests regardless of voice analysis.';
            }
        }

        // Process Python backend analysis results
        function processPythonResults(analysisResult, fileName, resultElement) {
            const { 
                overall_risk, 
                total_score, 
                recommendation, 
                text_analysis, 
                audio_analysis,
                audio_features,
                file_info 
            } = analysisResult;

            // Determine result class based on risk level
            let resultClass = 'success';
            let threatIcon = '‚úÖ';
            
            if (overall_risk === 'high') {
                resultClass = 'danger';
                threatIcon = 'üö®';
            } else if (overall_risk === 'medium') {
                resultClass = 'warning';
                threatIcon = '‚ö†Ô∏è';
            } else if (overall_risk === 'low') {
                resultClass = 'info';
                threatIcon = '‚ÑπÔ∏è';
            }

            // Build analysis details
            const analysisDetails = [];
            
            // Text analysis details
            if (text_analysis.transcribed_text) {
                analysisDetails.push(`üìù Transcription: "${text_analysis.transcribed_text.substring(0, 100)}${text_analysis.transcribed_text.length > 100 ? '...' : ''}"`);
                analysisDetails.push(`üìä Text Scam Score: ${text_analysis.scam_score}/100`);
                if (text_analysis.indicators.length > 0) {
                    analysisDetails.push(`üéØ Text Indicators: ${text_analysis.indicators.slice(0, 3).join(', ')}${text_analysis.indicators.length > 3 ? '...' : ''}`);
                }
            }
            
            // Audio analysis details
            if (audio_analysis.audio_score > 0) {
                analysisDetails.push(`üéµ Audio Suspicion Score: ${audio_analysis.audio_score}/100`);
                if (audio_analysis.audio_indicators.length > 0) {
                    analysisDetails.push(`üîä Audio Indicators: ${audio_analysis.audio_indicators.join(', ')}`);
                }
            }
            
            // Technical audio features
            if (audio_features) {
                const features = [];
                if (audio_features.speech_rate) features.push(`Speech Rate: ${audio_features.speech_rate.toFixed(2)}`);
                if (audio_features.pitch_mean) features.push(`Pitch: ${audio_features.pitch_mean.toFixed(1)}Hz`);
                if (audio_features.volume_mean) features.push(`Volume: ${(audio_features.volume_mean * 100).toFixed(1)}%`);
                if (features.length > 0) {
                    analysisDetails.push(`üîß Audio Features: ${features.join(', ')}`);
                }
            }

            // Display results
            resultElement.className = `result ${resultClass}`;
            resultElement.innerHTML = `
                <strong>${threatIcon} ${recommendation}</strong><br><br>
                <strong>File:</strong> ${fileName}<br>
                <strong>Risk Level:</strong> ${overall_risk.toUpperCase()}<br>
                <strong>Overall Score:</strong> ${total_score}/100<br><br>
                ${analysisDetails.length > 0 ? `<strong>Analysis Details:</strong><br>${analysisDetails.join('<br>')}<br><br>` : ''}
                <strong>File Info:</strong> ${(file_info.size / 1024 / 1024).toFixed(2)} MB<br><br>
                <small style="color: #666;">üêç Powered by Python AI Backend (Free)</small>
            `;
        }

        // Process local audio analysis results
        function processLocalResults(audioData, fileName, resultElement) {
            let aiProbability = 0;
            let analysisDetails = [];
            let suspiciousFactors = [];

            // Calculate AI probability based on audio characteristics
            let suspicionScore = 0;

            // 1. Check zero crossing rate (AI voices often have unnatural patterns)
            if (audioData.zeroCrossingRate < 0.1 || audioData.zeroCrossingRate > 0.5) {
                suspicionScore += 0.2;
                suspiciousFactors.push('Unusual speech pattern detected');
            }

            // 2. Check dynamic range (AI voices often have limited dynamic range)
            if (audioData.dynamicRange < 0.3) {
                suspicionScore += 0.25;
                suspiciousFactors.push('Limited dynamic range (possible synthetic)');
            }

            // 3. Check RMS levels (AI voices might have consistent loudness)
            if (audioData.rms > 0.8 || audioData.rms < 0.05) {
                suspicionScore += 0.15;
                suspiciousFactors.push('Unnatural loudness levels');
            }

            // 4. Check compression ratio (AI voices might be highly compressed)
            if (audioData.compressionRatio < 0.5) {
                suspicionScore += 0.2;
                suspiciousFactors.push('High compression ratio');
            }

            // 5. Check duration (very short clips might be AI-generated alerts)
            if (audioData.duration < 3) {
                suspicionScore += 0.1;
                suspiciousFactors.push('Very short audio duration');
            }

            // 6. Check spectral characteristics
            if (audioData.spectralCentroid < 500 || audioData.spectralCentroid > 4000) {
                suspicionScore += 0.1;
                suspiciousFactors.push('Unusual frequency characteristics');
            }

            aiProbability = Math.min(suspicionScore, 1.0); // Cap at 100%

            // Build analysis details
            analysisDetails.push(`Duration: ${audioData.duration.toFixed(2)} seconds`);
            analysisDetails.push(`Sample Rate: ${audioData.sampleRate} Hz`);
            analysisDetails.push(`Channels: ${audioData.channels}`);
            analysisDetails.push(`Dynamic Range: ${(audioData.dynamicRange * 100).toFixed(1)}%`);
            analysisDetails.push(`Zero Crossing Rate: ${(audioData.zeroCrossingRate * 100).toFixed(1)}%`);
            analysisDetails.push(`AI Probability: ${(aiProbability * 100).toFixed(1)}%`);

            // Determine threat level based on AI probability
            let threatLevel = 'safe';
            let threatMessage = '';
            
            if (aiProbability >= 0.6) {
                threatLevel = 'danger';
                threatMessage = '‚ö†Ô∏è High Risk: Possible AI Generated Voice';
                userStats.highRiskThreats++;
            } else if (aiProbability >= 0.35) {
                threatLevel = 'warning';
                threatMessage = '‚ö° Suspicious: Some AI Characteristics Detected';
                userStats.mediumRiskThreats++;
            } else if (aiProbability >= 0.15) {
                threatLevel = 'warning';
                threatMessage = '‚ö° Caution: Minor AI Indicators Found';
                userStats.mediumRiskThreats++;
            } else {
                threatLevel = 'safe';
                threatMessage = '‚úì Likely Human Voice';
                userStats.lowRiskThreats++;
            }

            // Display results
            resultElement.className = `result ${threatLevel}`;
            resultElement.innerHTML = `
                <strong>${threatMessage}</strong><br>
                <strong>File:</strong> ${fileName}<br>
                <strong>Analysis Method:</strong> Local Audio Analysis (FREE)<br>
                <strong>Suspicious Factors:</strong> ${suspiciousFactors.length > 0 ? suspiciousFactors.join(', ') : 'None detected'}<br>
                <strong>Technical Details:</strong><br>
                ${analysisDetails.join('<br>')}
                <br><br>
                <strong>Recommendation:</strong> ${getLocalVoiceRecommendation(aiProbability, suspiciousFactors)}
            `;
        }

        // Get recommendation based on local analysis results
        function getLocalVoiceRecommendation(aiProbability, suspiciousFactors) {
            if (aiProbability >= 0.6) {
                return 'Multiple suspicious audio characteristics detected. Exercise extreme caution and verify the caller\'s identity through alternative means before taking any action.';
            } else if (aiProbability >= 0.35) {
                return 'Some concerning audio patterns found. Consider verifying the caller\'s identity, especially for sensitive requests involving money or personal information.';
            } else if (aiProbability >= 0.15) {
                return 'Minor audio irregularities detected. While likely human, always verify identity for important requests.';
            } else {
                return 'Audio characteristics appear normal for human speech. However, always verify identity for sensitive requests regardless of voice analysis.';
            }
        }



        // Fallback analysis for text descriptions
        function performBasicVoiceAnalysis(voiceDescription, resultElement) {
            const lowerVoice = voiceDescription.toLowerCase();
            let score = 0;
            let indicators = [];
            
            if (lowerVoice.includes('robotic') || lowerVoice.includes('automated')) {
                score += 2;
                indicators.push('Robotic/automated characteristics');
            }
            if (lowerVoice.includes('background noise') || lowerVoice.includes('echo')) {
                score += 1;
                indicators.push('Audio quality issues');
            }
            if (lowerVoice.includes('urgent') || lowerVoice.includes('emergency')) {
                score += 1;
                indicators.push('Urgency tactics');
            }
            if (lowerVoice.includes('distorted') || lowerVoice.includes('unclear')) {
                score += 1;
                indicators.push('Audio distortion');
            }
            if (lowerVoice.includes('monotone') || lowerVoice.includes('flat')) {
                score += 1;
                indicators.push('Unnatural speech patterns');
            }
            
            let threatLevel, message;
            if (score >= 3) {
                threatLevel = 'danger';
                message = '‚ö†Ô∏è High Risk Based on Description';
                userStats.highRiskThreats++;
            } else if (score >= 2) {
                threatLevel = 'warning';
                message = '‚ö° Suspicious Characteristics';
                userStats.mediumRiskThreats++;
            } else if (score >= 1) {
                threatLevel = 'warning';
                message = '‚ö° Some Concerns Noted';
                userStats.mediumRiskThreats++;
            } else {
                threatLevel = 'safe';
                message = '‚úì No Clear Red Flags in Description';
                userStats.lowRiskThreats++;
            }
            
            resultElement.className = `result ${threatLevel}`;
            resultElement.innerHTML = `
                <strong>${message}</strong><br>
                <strong>Analysis:</strong> Based on voice description<br>
                <strong>Indicators Found:</strong> ${indicators.length > 0 ? indicators.join(', ') : 'None detected'}<br>
                <br><strong>Note:</strong> For accurate AI detection, please upload an actual audio file.
            `;
        }

        function scanLink() {
            const link = document.getElementById('linkInput').value;
            const result = document.getElementById('linkResult');
            
            if (!link.trim()) {
                alert('Please enter a URL');
                return;
            }

            userStats.totalScans++;
            userStats.linkScans++;

            const suspiciousDomains = ['bit.ly', 'tinyurl', 'goo.gl', 'ow.ly'];
            const suspiciousPatterns = /(\d{1,3}\.){3}\d{1,3}/;
            
            let riskScore = 0;
            const lowerLink = link.toLowerCase();
            
            const hasHttps = lowerLink.startsWith('https://');
            
            if (!hasHttps) riskScore += 2;
            
            suspiciousDomains.forEach(domain => {
                if (lowerLink.includes(domain)) riskScore += 1;
            });
            
            if (suspiciousPatterns.test(link)) riskScore += 2;
            if (lowerLink.includes('@') || lowerLink.includes('--')) riskScore += 1;
            if ((link.match(/-/g) || []).length > 4) riskScore += 1;

            result.style.display = 'block';
            
            if (riskScore >= 3) {
                result.className = 'result danger';
                result.innerHTML = '<strong>‚ö†Ô∏è High Risk URL</strong><br>Multiple security concerns detected. Do not visit this link or enter credentials.';
                userStats.highRiskThreats++;
            } else if (riskScore >= 1) {
                result.className = 'result warning';
                result.innerHTML = '<strong>‚ö° Caution Advised</strong><br>URL shows concerning characteristics. Verify authenticity before proceeding.';
                userStats.mediumRiskThreats++;
            } else {
                result.className = 'result safe';
                result.innerHTML = '<strong>‚úì Structure Valid</strong><br>URL appears properly formatted with HTTPS. Always verify site authenticity before submitting data.';
                userStats.lowRiskThreats++;
            }

            saveStats();
            updateDashboard();
        }

        // File upload handlers
        function handleImageUpload(event) {
            const file = event.target.files[0];
            const preview = document.getElementById('imagePreview');
            const input = document.getElementById('imageInput');
            
            if (file) {
                // Validate file type
                if (!file.type.startsWith('image/')) {
                    alert('Please select an image file');
                    return;
                }
                
                // Check file size (limit to 10MB)
                if (file.size > 10 * 1024 * 1024) {
                    alert('Image file size should be less than 10MB');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.innerHTML = `
                        <div class="file-info">
                            <span class="file-name">${file.name}</span>
                            <span class="file-size">(${(file.size / 1024 / 1024).toFixed(2)} MB)</span>
                        </div>
                        <img src="${e.target.result}" alt="Preview" class="image-preview">
                    `;
                    preview.classList.add('active');
                    input.value = `Uploaded image: ${file.name}`;
                };
                reader.readAsDataURL(file);
            }
        }

        function handleAudioUpload(event) {
            const file = event.target.files[0];
            const preview = document.getElementById('audioPreview');
            const analyzeButton = document.getElementById('analyzeButton');
            
            if (file) {
                // Validate file type
                if (!file.type.startsWith('audio/')) {
                    alert('Please select an audio file');
                    return;
                }
                
                // Check file size (limit to 25MB)
                if (file.size > 25 * 1024 * 1024) {
                    alert('Audio file size should be less than 25MB');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.innerHTML = `
                        <div class="file-info">
                            <span class="file-name">${file.name}</span>
                            <span class="file-size">(${(file.size / 1024 / 1024).toFixed(2)} MB)</span>
                        </div>
                        <audio controls class="audio-controls">
                            <source src="${e.target.result}" type="${file.type}">
                            Your browser does not support the audio element.
                        </audio>
                    `;
                    preview.classList.add('active');
                    
                    // Enable the analyze button
                    analyzeButton.disabled = false;
                    analyzeButton.textContent = `ü§ñ Analyze ${file.name}`;
                    analyzeButton.style.background = '#6366f1';
                    analyzeButton.style.cursor = 'pointer';
                };
                reader.readAsDataURL(file);
            }
        }

        function scanImage() {
            const image = document.getElementById('imageInput').value;
            const result = document.getElementById('imageResult');
            const fileInput = document.getElementById('imageFileInput');
            
            if (!image.trim() && !fileInput.files.length) {
                alert('Please enter an image URL, description, or upload an image file');
                return;
            }

            userStats.totalScans++;
            userStats.imageScans++;

            const lowerImage = image.toLowerCase();
            let score = 0;
            let analysisText = '';
            
            // Check if it's an uploaded file
            if (fileInput.files.length > 0) {
                const file = fileInput.files[0];
                analysisText = `Analyzing uploaded image: ${file.name}`;
                
                // Basic analysis based on file properties
                if (file.size < 50000) score += 1; // Very small file might be suspicious
                if (file.name.toLowerCase().includes('stock')) score += 2;
                if (file.name.toLowerCase().includes('profile')) score += 1;
            } else {
                // Text-based analysis
                analysisText = 'Analyzing image description or URL';
                if (lowerImage.includes('stock') || lowerImage.includes('model')) score += 2;
                if (lowerImage.includes('professional') || lowerImage.includes('studio')) score += 1;
                if (lowerImage.includes('url') || lowerImage.includes('http')) score += 0.5;
            }
            
            result.style.display = 'block';
            
            if (score >= 2) {
                result.className = 'result warning';
                result.innerHTML = `<strong>‚ö° Potential Risk Detected</strong><br>${analysisText}<br>Image may be from stock photo sources or show suspicious characteristics. Common in fake profiles and scams.`;
                userStats.mediumRiskThreats++;
            } else if (score >= 1) {
                result.className = 'result warning';
                result.innerHTML = `<strong>‚ö° Minor Concerns</strong><br>${analysisText}<br>Some characteristics detected that warrant attention. Verify authenticity through reverse image search.`;
                userStats.mediumRiskThreats++;
            } else {
                result.className = 'result safe';
                result.innerHTML = `<strong>‚úì Analysis Complete</strong><br>${analysisText}<br>No obvious suspicious characteristics detected. Use reverse image search engines (Google Images, TinEye) for comprehensive verification.`;
                userStats.lowRiskThreats++;
            }

            saveStats();
            updateDashboard();
        }

        // Section navigation functionality
        function scrollToSection(sectionId) {
            if (sectionId === 'landing') {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else {
                const section = document.getElementById(sectionId);
                if (section) {
                    section.scrollIntoView({ behavior: 'smooth' });
                }
            }
            updateActiveNavDot(sectionId);
        }

        function updateActiveNavDot(activeSection) {
            const dots = document.querySelectorAll('.nav-dot');
            dots.forEach(dot => dot.classList.remove('active'));
            
            const sections = ['landing', 'features', 'our-impact', 'intelligence'];
            const activeIndex = sections.indexOf(activeSection);
            if (activeIndex !== -1 && dots[activeIndex]) {
                dots[activeIndex].classList.add('active');
            }
        }

        // Update navigation dots on scroll
        window.addEventListener('scroll', function() {
            const sections = [
                { id: 'landing', element: document.getElementById('landing') },
                { id: 'features', element: document.getElementById('features') },
                { id: 'our-impact', element: document.getElementById('our-impact') },
                { id: 'intelligence', element: document.getElementById('intelligence') }
            ];

            let currentSection = 'landing';
            const scrollPosition = window.scrollY + window.innerHeight / 2;

            sections.forEach(section => {
                if (section.element) {
                    const sectionTop = section.element.offsetTop;
                    const sectionHeight = section.element.offsetHeight;
                    
                    if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                        currentSection = section.id;
                    }
                }
            });

            updateActiveNavDot(currentSection);
        });

        // Ensure landing page feature cards don't trigger navigation
        document.addEventListener('DOMContentLoaded', function() {
            const landingFeatureCards = document.querySelectorAll('#landing .feature-card');
            landingFeatureCards.forEach(card => {
                card.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    // Just show a subtle animation to indicate it's informational
                    card.style.transform = 'translateY(-2px) scale(1.02)';
                    setTimeout(() => {
                        card.style.transform = '';
                    }, 200);
                });
            });

            // Add click handlers for file upload labels
            const imageUploadLabel = document.querySelector('label[for="imageFileInput"]');
            const audioUploadLabel = document.querySelector('label[for="audioFileInput"]');
            
            if (imageUploadLabel) {
                imageUploadLabel.addEventListener('click', function() {
                    document.getElementById('imageFileInput').click();
                });
            }
            
            if (audioUploadLabel) {
                audioUploadLabel.addEventListener('click', function() {
                    document.getElementById('audioFileInput').click();
                });
            }

            // Add input validation for message analyzer
            const messageInput = document.getElementById('messageInput');
            const messageButton = document.getElementById('messageAnalyzeButton');
            
            if (messageInput && messageButton) {
                function updateMessageButton() {
                    const hasText = messageInput.value.trim().length > 0;
                    messageButton.disabled = !hasText;
                    messageButton.textContent = hasText ? 
                        'ü§ñ Analyze with Gemini AI' : 
                        'Enter Message to Analyze';
                    messageButton.style.background = hasText ? '#6366f1' : '#2a2a2a';
                    messageButton.style.cursor = hasText ? 'pointer' : 'not-allowed';
                }
                
                messageInput.addEventListener('input', updateMessageButton);
                messageInput.addEventListener('paste', () => setTimeout(updateMessageButton, 10));
                updateMessageButton(); // Initial state
            }
        });

        // Initialize on page load
        window.addEventListener('load', function() {
            const savedStats = getCookie('scamshield_stats');
            if (savedStats) {
                userStats = savedStats;
            }
        });
    </script>
</body>
          
    <script>
        // (Removed duplicate declaration of userStats)

        function setCookie(name, value, days) {
            const expires = new Date();
            expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));
            document.cookie = name + '=' + JSON.stringify(value) + ';expires=' + expires.toUTCString();
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for(let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) {
                    try {
                        return JSON.parse(c.substring(nameEQ.length, c.length));
                    } catch(e) {
                        return null;
                    }
                }
            }
            return null;
        }

        function saveStats() {
            setCookie('scamshield_stats', userStats, 30);
        }

        function updateDashboard() {
            document.getElementById('totalScans').textContent = userStats.totalScans.toLocaleString();
            document.getElementById('threatsDetected').textContent = userStats.highRiskThreats.toLocaleString();
            document.getElementById('successRate').textContent = '99.7%';
            document.getElementById('dataProtected').textContent = (userStats.totalScans * 2.3).toFixed(1) + 'GB';
            
            document.getElementById('phoneScansCount').textContent = userStats.phoneScans;
            document.getElementById('messageScansCount').textContent = userStats.messageScans;
            document.getElementById('voiceScansCount').textContent = userStats.voiceScans;
            document.getElementById('linkScansCount').textContent = userStats.linkScans;
            document.getElementById('imageScansCount').textContent = userStats.imageScans;
                    document.getElementById('newsChecksCount').textContent = userStats.newsChecks;
                }
            </script>